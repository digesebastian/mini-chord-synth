## MINI CHORD SYNTH

### Overview
Mini Chord Synth is a browser-based chord synthesizer that allows the users to explore musical scales and harmony in real-time. It proposes multiple scale types such as major, minor, and harmonic minor, from which diatonic chords are automatically generated. Chord transformations can be controlled interactively, enabling users to reshape harmony while playing and listening to the result. 

Multiple sound engines are provided to emphasise different musical characters. A sine-wave synthesizer produces a pure sound with minimal timbre making it ideal to perceive chord structures and harmonic changes. A sawtooth synthesis, with its richer harmonic spectrum, creates more expressive chord transformations. In addition, a physically modelled acoustic guitar offers a more realistic musical form of the same harmonic content.
Visual feedback is given for each sound engine. Synthetised chords are displayed on a piano highlighting both chord tones and the bass note, while for the guitar the chords are visualised on a guitar fretboard.
 
### How to use it?
The synthesizer runs entirely in the browser and can be accessed [here](https://digesebastian.github.io/mini-chord-synth/)

To use it, a preferred root note and scale type can first be selected from the dropdown menus. An instrument can then be chosen between sine waves, sawtooth waves, and guitar. The chords are displayed on the buttons and update automatically when the scale or root note changes.
Chords can be played either with the mouse or by using the “A W S D R F G” keys on the keyboard. Holding a key sustains the chord; releasing it stops playback. The joystick can be controlled with the mouse or using the direction keys on the keyboard. Different directions apply different chord transformations, which can be seen on the screen below it.
The notes of the chords being played are displayed on the mini piano or mini guitar visualizations.


### Wave visualizer 
The wave visualizer displays the audio signal generated by the synthesizer in real time. It uses audio signal data from the audio engine to render the waveform directly onto an HTML canvas. 
The visualization updates continuously while audio is playing and  provides immediate visual feedback of the signal’s amplitude and movement.


### Music theory
The main purpose of the synthesizer is to make it easy to play chords that sound good. This is done by using the diatonic chords of the chosen scale, which are precisely the 7 triads, corresponding to the 7 steps of the scale, that fits the scale. For a major scale this gives the chords:
I (major) - II (minor) - III (minor) - IV (major) - V (major) - VI (minor) - VII (diminished).

This means that as long as the musical piece stays in the same key, all of the 7 base chords will always fit. This notion also applies to the 7th and 9th chords playable by moving the joystick to right.

The other chord transformations do not follow the scale, but are included to give more flexibility and freedom in playing.


### Chord transformations / joystick
All credit to the design/functionality joystick goes to [bobboteck](https://github.com/bobboteck/JoyStick)

The following chord transformations are available (in terms of direction of joystick, e.g. N = north = up)

- N = maj/min (Turns major and augmented base chords into minor, and minor and diminished chords into major)
- NE = dominant 7th
- E = min/maj 7th (Major or minor depends on which 7th note fits the scale)
- SE = min/maj 9th (Also adds a 7th note. Major or minor depends on which 9th note fits the scale)
- S = sus4 (Suspended 4th)
- SW = sus2 (Suspended 2nd)
- W = diminished (If base chord is diminished, it is turned into a minor)
- NW = augmented (If base chord is augmented, it is turned into a major)


### Guitar Algorithm
The guitar sound is generated using a physically inspired string model based on the Karplus-Strong algorithm running in an AudioWorklet for real-time, sample-accurate DSP. Each guitar string is modeled as an independent vibrating system: when a string is plucked, an excitation signal (shaped noise) is generated on the main thread and sent to an AudioWorklet processor, where the actual sound synthesis occurs. 
Pitch is defined by the delay-line length (computed from string frequency and audio sample rate), and sound is produced by a feedback loop that continuously averages past samples, simulating wave propagation and energy loss along a real string. The initial excitation is shaped using a pluck-position envelope, which simulates where along the string the player plucks. Subtle micro detuning is applied per string and per pluck to emulate imperfect tuning, finger pressure, and string stiffness, preventing digital sounding tones.
To improve realism the guitar uses a DSP pipeline: each string passes through a stereo panner for spatial placement, and is routed dynamically through different signal paths depending on playing technique. Fingerpicking uses a clean, high-cutoff low-pass filter to preserve clarity, while strumming is routed through a separate bus with additional low-pass filtering to tame harsh transients and simulate the natural smoothing of a guitar body. A configurable strum delay introduces a small time offset between strings, recreating the physical motion of a human strum. The system supports chord voicings based on pitch classes, scale awareness, and rhythmic patterns driven by Tone.Transport.

The karplus-strong algorithm was coded using this [matlab's example](https://www.mathworks.com/help/signal/ug/generate-guitar-chords-using-the-karplus-strong-algorithm.html).
 
### Code Structure
- index.html → root html file
- mini-chord-synth.js → core application logic 
- mini-chord-synth.css → user interface styling 
- chord.js → chord construction and transformation
- scales.js → scales definition and mapping 
- guitar.js → guitar synthesis 
- mini-guitar.js → guitar fretboard visualisation
- minipiano.js → piano visualisation
- joystick.js → joystick implementation 
- joystick-keyboard.js → keyboard controls for joystick
- wave-visualiser.js → audio waveform visualisation


### Documentation:
- https://hichord.shop
- https://tonejs.github.io/docs/15.1.22/modules.html 
